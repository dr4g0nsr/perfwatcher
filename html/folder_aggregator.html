<script id="folder_aggregator_pl" type="text/html">
    <li><a href="#" id="del_{{ plugin }}" style="color:gray; text-decoration:underline;">delete</a> {{ plugin_name }} ({{ plugin_cf }}) </li>
</script>
<script type="text/javascript">
	ich.grabTemplates();
	if (json_item_datas['datas'] && json_item_datas['datas']['plugins']) {
		for (plugin in json_item_datas['datas']['plugins']) {
			var plugin_name = plugin.substring(0, plugin.length - 4)
			var plugin_cf = plugin.substring(plugin.length - 3)
			ich.folder_aggregator_pl({ plugin: plugin, plugin_name: plugin_name, plugin_cf: plugin_cf }).appendTo('div[widget="folder_aggregator"] div[class="plugin_list"]');
		}
	}
    $('div[widget="folder_aggregator"] input[type="button"]').button();
	/*
    $('div[widget="folder_aggregator"] button.test').click(function () {
        $.ajax({
            async : false, type: 'POST', url: "action.php?tpl=folder_aggregator",
            data : {
				"action" : "test", 
				"regex" : $('div[widget="folder_aggregator"] input.regex').val(),
				"id" : json_item_datas['jstree']['id']
			},
            complete : function (r) {
                if(!r.status) { ('div[widget="folder_aggregator"] div.result').html('Error, can\'t retrieve data from server !'); }
                else { $('div[widget="folder_aggregator"] div.result').html(r.responseText); }
            }
        });
    });
    $('div[widget="folder_aggregator"] button.save').click(function () {
        $.ajax({
            async : false, type: 'POST', url: "action.php?tpl=folder_aggregator",
            data : {
				"action" : "save", 
				"regex" : $('div[widget="folder_aggregator"] input.regex').val(),
				"id" : json_item_datas['jstree']['id']
			},
            complete : function (r) {
                if(!r.status) { ('div[widget="folder_aggregator"] div.result').html('Error, can\'t retrieve data from server !'); }
                else { $('div[widget="folder_aggregator"] div.result').html(r.responseText); }
            }
        });
    });
	if (json_item_datas['datas'] && json_item_datas['datas']['serverslist'] && json_item_datas['datas']['serverslist']['gprimeregex']) {
		$('div[widget="folder_aggregator"] input.regex').val(json_item_datas['datas']['serverslist']['gprimeregex']);
	}
	*/
</script>
<select class="select_plugin" multiple="multiple">
</select>
<input type="radio" name="plugin_type" value="AVG" checked="true" /> AVG
<input type="radio" name="plugin_type" value="SUM" /> SUM
<input type="button" class="add" value="Add" />
<div class="plugin_list"></div>
