<div>
	<script type="text/javascript">
	$(function () {
		selection_is_saved = true;

		load_markup("{{ tabid }}", "{{ selection_id }}");
		switch_to_show("{{ tabid }}");

		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_edit"]').click(function() {
			switch_to_edit("{{ tabid }}");
		});
		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_reload"]').click(function() {
			load_markup("{{ tabid }}", "{{ selection_id }}");
		});
		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_save"]').click(function() {
			save_markup("{{ tabid }}", "{{ selection_id }}");
		});
		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_show"]').click(function() {
			switch_to_show("{{ tabid }}");
		});
		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_save_show"]').click(function() {
			save_markup("{{ tabid }}", "{{ selection_id }}");
			switch_to_show("{{ tabid }}");
		});
		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_paste"]').click(function() {
			var cliptext = '';
			$.each(clipboard, function(i,txt) { cliptext += txt + "\n"; });
			$('.selection_edit[tabid="{{ tabid }}"] textarea').insertAtCaret(cliptext);
		});
		$('.selection_command[tabid="{{ tabid }}"] input[class="selection_btn_showclip"]').click(function() {
			show_clipboard_contents("{{ tabid }}");
		});
		
	});
	</script>
    <div class="selection_command" tabid="{{ tabid }}">
      <input type="button" class="selection_btn_edit"  value="edit"></input>
      <input type="button" class="selection_btn_save"  value="save"></input>
      <input type="button" class="selection_btn_save_show"  value="save and show"></input>
      <input type="button" class="selection_btn_reload" value="reload"></input>
      <input type="button" class="selection_btn_show"  value="show"></input>
      <input type="button" class="selection_btn_paste"  value="paste clipboard"></input>
      <input type="button" class="selection_btn_showclip"  value="show clipboard"></input>
	  <span class="selection_span_info">Warning, your selection is not saved</span>
    </div>
	<div class="selection_edit" tabid="{{ tabid }}">
	<textarea></textarea>
	<h1>Info</h1>
	<p>This area is markup language. See <a href="https://github.com/coreyti/showdown">https://github.com/coreyti/showdown</a></p>
	<p>You can add graphs with this syntax :</p>
	<blockquote>
rrdgraph(Collectd_source, host, plugin, plugin_instance, type, type_instance)
	</blockquote>
	<p>
		<code>Collectd_source</code> is mandatory. Fields <code>plugin_instance</code> and <code>type_instance</code> can be left empty. All fields except <code>Collectd_source</code> can be regular expressions to match more than one graph.
	</p> 
	<h1>Example</h1>
<pre>
# Title #
## memory for host1 ##
rrdgraph(localhost, host1, memory,, memory,)
## load for host1 and 2 ##
rrdgraph(localhost, host[12], load,, load,)
## all cpu for host1 ##
rrdgraph(localhost, host1, cpu, .*, cpu,)
</pre>
	</div>
	<div class="selection_show" tabid="{{ tabid }}">
	</div>
	    
</div>
